language: php
php:
  - 5.3
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - hhvm
matrix:
  allow_failures:
  - php: 5.6
  - php: 7.0
  - php: hhvm
env:
  matrix:
    - MAGENTO_VERSION=magento-ce-1.9.2.1
    - MAGENTO_VERSION=magento-ce-1.9.2.0
    - MAGENTO_VERSION=magento-ce-1.9.1.0
    - MAGENTO_VERSION=magento-ce-1.9.0.1
    - MAGENTO_VERSION=magento-ce-1.8.1.0
    - MAGENTO_VERSION=magento-ce-1.8.0.0
    - MAGENTO_VERSION=magento-ce-1.7.0.2
before_script:
  - git clone https://github.com/magento-ecg/coding-standard.git ecg
  - curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar
script:
  # Code Style
  - PHP_VERSION=$(php -v | grep "PHP 5" | sed 's/.*PHP \([^-]*\).*/\1/' | cut -c 1-3); PHP_53='5.3'; if [[ $(echo "if (${PHP_VERSION} > ${PHP_53}) 1 else 0" | bc) -eq 1 ]]; then php phpcs.phar --standard=./ecg --encoding=utf-8 --report-width=180 ./app; fi
  - if hash hhvm 2>/dev/null; then php phpcs.phar --standard=./ecg --encoding=utf-8 --report-width=180 ./app; fi
